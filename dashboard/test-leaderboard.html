<!DOCTYPE html>
<!-- AEZ Evolution | Copyright (c) 2026 SolisHQ (github.com/solishq) | MIT License -->
<html>
<head>
    <title>Leaderboard Test</title>
    <meta name="author" content="SolisHQ">
    <style>
        body {
            background: #1a1f3a;
            color: white;
            font-family: monospace;
            padding: 20px;
        }
        .section {
            background: #2a3550;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .error { color: #ff4444; }
        .success { color: #00ff00; }
    </style>
</head>
<body>
    <h1>üîç Leaderboard Test</h1>

    <div class="section">
        <h2>Test 1: API Connection</h2>
        <div id="test1">Testing...</div>
    </div>

    <div class="section">
        <h2>Test 2: Leaderboard Data</h2>
        <div id="test2">Testing...</div>
    </div>

    <div class="section">
        <h2>Test 3: Network Data</h2>
        <div id="test3">Testing...</div>
    </div>

    <div class="section">
        <h2>Leaderboard Display</h2>
        <div id="leaderboard"></div>
    </div>

    <script>
        async function runTests() {
            // Test 1: API Connection
            try {
                const resp = await fetch('http://localhost:8000/');
                const data = await resp.json();
                document.getElementById('test1').innerHTML =
                    `<span class="success">‚úì API Connected: ${data.message}</span>`;
            } catch (error) {
                document.getElementById('test1').innerHTML =
                    `<span class="error">‚úó Error: ${error.message}</span>`;
            }

            // Test 2: Leaderboard
            try {
                const resp = await fetch('http://localhost:8000/leaderboard?limit=5');
                const data = await resp.json();
                document.getElementById('test2').innerHTML =
                    `<span class="success">‚úì Leaderboard loaded: ${data.leaderboard.length} agents</span>`;

                // Display leaderboard
                const html = data.leaderboard.map((agent, i) => `
                    <div style="background: #1a1f3a; padding: 10px; margin: 5px 0; border-radius: 5px;">
                        <strong>#${i+1} ${agent.id}</strong> (${agent.strategy})<br/>
                        Fitness: ${agent.fitness} |
                        Interactions: ${agent.interactions} |
                        Cooperations: ${agent.cooperations} |
                        Defections: ${agent.defections}
                    </div>
                `).join('');
                document.getElementById('leaderboard').innerHTML = html;

            } catch (error) {
                document.getElementById('test2').innerHTML =
                    `<span class="error">‚úó Error: ${error.message}</span>`;
            }

            // Test 3: Network
            try {
                const resp = await fetch('http://localhost:8000/network/trust');
                const data = await resp.json();
                const alive = data.nodes.filter(n => n.alive).length;
                document.getElementById('test3').innerHTML =
                    `<span class="success">‚úì Network loaded: ${data.nodes.length} nodes (${alive} alive), ${data.edges.length} edges</span>`;
            } catch (error) {
                document.getElementById('test3').innerHTML =
                    `<span class="error">‚úó Error: ${error.message}</span>`;
            }
        }

        // Run tests on load
        runTests();
    </script>
</body>
</html>
